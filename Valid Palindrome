public class Solution {
    public boolean isPalindrome(String s) {
        // Start typing your Java solution below
        // DO NOT write main() function
        if(s == null || s.length() == 0)    return true;
        int length = s.length();
        s = s.toLowerCase();
        int head = 0;
        int tail = length - 1;
        char[] chars = s.toCharArray();
        while(head < tail){
            while(!isValidChar(chars[head])){
                if(head + 1 < length){
                    head++;
                }else{
                    break;
                }
            }
            
            while(!isValidChar(chars[tail])){
                if(tail - 1 >= 0){              //这里把>=写成>了, 有两个case就没过, ".," "a ."
                    tail--;
                }else{
                    break;
                }
            }
            
            if(head > tail || (head == length - 1 && tail == 0))    return true;
            if(chars[head] != chars[tail] || !isValidChar(chars[head]))   return false;
            head++;
            tail--;
        }
        return true;
    }
    
    private boolean isValidChar(char c){
        if(c >= '0' && c <= '9')    return true;
        if(c >= 'a' && c <= 'z')    return true;
        return false;
    }
}
